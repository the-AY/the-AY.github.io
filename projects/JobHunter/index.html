<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Hunter Pro - ATS Scanner & Search</title>
    <!-- Simple consistent styling matching main portfolio -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --primary: #3b82f6;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --success: #22c55e;
            --warning: #f59e0b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
        }

        .navbar {
            background-color: var(--card-bg);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-back {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-back:hover {
            color: var(--text-main);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--card-bg);
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            padding: 1rem 2rem;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        h2 {
            margin-bottom: 1rem;
            color: var(--text-main);
        }

        h3 {
            margin-bottom: 0.5rem;
            color: var(--text-main);
            font-size: 1.2rem;
        }

        p {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-muted);
        }

        input[type="text"],
        input[type="file"] {
            width: 100%;
            padding: 0.8rem;
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            color: white;
            transition: border-color 0.3s;
        }

        input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .btn {
            background-color: var(--primary);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        /* ATS Specifics */
        .score-gauge {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 0%, #334155 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            position: relative;
        }

        .score-gauge::before {
            content: "";
            position: absolute;
            width: 120px;
            height: 120px;
            background-color: var(--card-bg);
            border-radius: 50%;
        }

        .score-value {
            position: relative;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .feedback-item {
            display: flex;
            align-items: start;
            gap: 10px;
            margin-bottom: 0.8rem;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
        }

        .feedback-item.success ion-icon {
            color: var(--success);
        }

        .feedback-item.warning ion-icon {
            color: var(--warning);
        }

        /* Job Search Grid */
        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .search-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            text-decoration: none;
            color: white;
            transition: transform 0.2s;
            border: 1px solid transparent;
        }

        .search-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .search-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .tag {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            color: var(--primary);
            padding: 0.2rem 0.6rem;
            border-radius: 1rem;
            font-size: 0.85rem;
            margin: 0 0.2rem 0.2rem 0;
        }

        .download-box {
            margin-top: 3rem;
            text-align: center;
            padding: 2rem;
            border-top: 1px solid #334155;
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <a href="../../index.html" class="nav-back">
            <ion-icon name="arrow-back-outline"></ion-icon> Back to Portfolio
        </a>
        <div class="nav-brand">
            <ion-icon name="briefcase"></ion-icon> Job Hunter Pro
        </div>
        <div style="width: 100px;"></div> <!-- Spacer -->
    </nav>

    <div class="container">

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('ats')">ATS Scanner</button>
            <button class="tab-btn" onclick="switchTab('search')">Job Search</button>
        </div>

        <!-- ATS SCANNER SECTION -->
        <div id="ats" class="tab-content active">
            <div class="card">
                <h2>Resume Analysis</h2>
                <p>Upload your PDF resume to check its parseability and get instant feedback.</p>
                <div class="input-group">
                    <input type="file" id="resumeInput" accept="application/pdf" onchange="analyzeResume()">
                </div>

                <div id="atsResults" style="display: none;">
                    <div style="display: flex; flex-wrap: wrap; gap: 2rem;">
                        <div style="flex: 1; min-width: 250px; text-align: center;">
                            <div class="score-gauge" id="scoreGauge">
                                <span class="score-value" id="scoreValue">0</span>
                            </div>
                            <h3>ATS Capability Score</h3>
                            <p>Based on keywords & structure</p>
                        </div>
                        <div style="flex: 2; min-width: 300px;">
                            <h3>Feedback</h3>
                            <div id="feedbackList"></div>

                            <h3 style="margin-top: 1.5rem;">Detected Skills</h3>
                            <div id="skillsList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- JOB SEARCH SECTION -->
        <div id="search" class="tab-content">
            <div class="card">
                <h2>Intelligent Job Search</h2>
                <p>Generate optimized Boolean search links for major platforms.</p>

                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <div style="flex: 1;">
                        <label>Job Role</label>
                        <input type="text" id="jobRole" placeholder="e.g. Python Developer" value="Software Developer">
                    </div>
                    <div style="flex: 1;">
                        <label>Location</label>
                        <input type="text" id="jobLocation" placeholder="e.g. Remote, Bangalore" value="Remote">
                    </div>
                </div>
                <div class="input-group" style="margin-top: 1rem;">
                    <label>Skills (Auto-filled from ATS or Manual)</label>
                    <input type="text" id="jobSkills" placeholder="Python, Django, AWS">
                </div>

                <button class="btn" onclick="generateLinks()">
                    <ion-icon name="search"></ion-icon> Find Jobs
                </button>

                <div id="linkResults" style="margin-top: 2rem; display: none;">
                    <h3>One-Click Search Links</h3>
                    <div class="search-grid" id="searchGrid">
                        <!-- Links generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- OFFLINE APP TEASER -->
        <div class="download-box">
            <h3>Want more power?</h3>
            <p>Get the offline Python app with advanced NLP features (Spacy), local file analysis, and more.</p>
            <a href="https://github.com/the-AY" class="btn btn-outline" target="_blank">
                <ion-icon name="logo-github"></ion-icon> View Project Source
            </a>
            <a href="JobHunter_Source.zip" class="btn btn-outline" download>
                <ion-icon name="download-outline"></ion-icon> Download Offline App (ZIP)
            </a>
        </div>

    </div>

    <script>
        // --- TAB LOGIC ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`button[onclick="switchTab('${tabId}')"]`).classList.add('active');
        }

        // --- SKILL / KEYWORD DB (Simulated) ---
        const commonSkills = [
            // Programming Languages
            "python", "javascript", "java", "c++", "c#", "ruby", "php", "swift", "kotlin", "go", "rust", "typescript",
            // Web
            "html", "css", "react", "angular", "vue", "node.js", "django", "flask", "fastapi", "spring boot", "asp.net",
            // Data & AI
            "sql", "mysql", "postgresql", "mongodb", "pandas", "numpy", "pytorch", "tensorflow", "scikit-learn", "machine learning", "deep learning", "nlp",
            // Cloud & DevOps
            "aws", "azure", "gcp", "docker", "kubernetes", "jenkins", "git", "ci/cd", "terraform", "ansible",
            // Soft Skills
            "communication", "leadership", "teamwork", "agile", "scrum", "problem solving", "time management"
        ];

        let extractedSkills = [];

        // --- ATS LOGIC (Client-Side PDF) ---
        async function analyzeResume() {
            const fileInput = document.getElementById('resumeInput');
            if (!fileInput.files[0]) return;

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = async function () {
                const typedarray = new Uint8Array(this.result);

                try {
                    const pdf = await pdfjsLib.getDocument(typedarray).promise;
                    let fullText = "";

                    for (let i = 1; i <= pdf.numPages; i++) {
                        const page = await pdf.getPage(i);
                        const textContent = await page.getTextContent();
                        fullText += textContent.items.map(item => item.str).join(" ");
                    }

                    processText(fullText);
                } catch (e) {
                    alert("Error parsing PDF. Please ensure it's a valid PDF file.");
                    console.error(e);
                }
            };

            reader.readAsArrayBuffer(file);
        }

        function processText(text) {
            const lowerText = text.toLowerCase();
            document.getElementById('atsResults').style.display = 'block';

            // 1. Skill Extraction
            extractedSkills = commonSkills.filter(skill => lowerText.includes(skill.toLowerCase()));

            // Update Search Input with Skills
            document.getElementById('jobSkills').value = extractedSkills.slice(0, 5).join(", ");

            // 2. Checks
            const checks = [];
            let score = 20; // Base score

            // Skills Check
            if (extractedSkills.length > 5) {
                score += 30;
                checks.push({ type: 'success', text: `Great! Found ${extractedSkills.length} relevant skills.` });
            } else if (extractedSkills.length > 0) {
                score += 15;
                checks.push({ type: 'warning', text: `Only found ${extractedSkills.length} skills. Consider adding more.` });
            } else {
                checks.push({ type: 'warning', text: "No common technical skills found." });
            }

            // Action Verbs Check
            const actionVerbs = ["led", "developed", "created", "managed", "designed", "implemented", "optimized", "achieved"];
            const foundVerbs = actionVerbs.filter(v => lowerText.includes(v));
            if (foundVerbs.length > 2) {
                score += 10;
                checks.push({ type: 'success', text: `Strong action verbs detected (${foundVerbs.length}).` });
            } else {
                checks.push({ type: 'warning', text: "Use more action verbs like 'Led', 'Developed', 'Achieved'." });
            }

            // Metrics Check
            if (/\d+%|\$\d+|\d+\+/.test(text)) {
                score += 10;
                checks.push({ type: 'success', text: "Quantifiable metrics (%, $) detected." });
            } else {
                checks.push({ type: 'warning', text: "Add numbers to quantify your impact (e.g., 'Improved by 20%')." });
            }

            // Contact Check
            if (text.includes("@")) {
                score += 10;
                checks.push({ type: 'success', text: "Email address detected." });
            } else {
                checks.push({ type: 'warning', text: "Email address missing!" });
            }

            // Section Check (Simple)
            if (lowerText.includes("experience") || lowerText.includes("work")) {
                score += 10;
                checks.push({ type: 'success', text: "Experience section detected." });
            } else {
                checks.push({ type: 'warning', text: "Experience section missing." });
            }

            if (lowerText.includes("education")) {
                score += 10;
                checks.push({ type: 'success', text: "Education section detected." });
            }

            // Render
            updateGauge(score);
            renderFeedback(checks);
            renderSkills(extractedSkills);
        }

        function updateGauge(score) {
            const gauge = document.getElementById('scoreGauge');
            const value = document.getElementById('scoreValue');
            value.innerText = score;
            let color = score > 70 ? '#22c55e' : (score > 40 ? '#f59e0b' : '#ef4444');
            gauge.style.background = `conic-gradient(${color} ${score}%, #334155 ${score}%)`;
        }

        function renderFeedback(checks) {
            const container = document.getElementById('feedbackList');
            container.innerHTML = checks.map(c => `
                <div class="feedback-item ${c.type}">
                    <ion-icon name="${c.type === 'success' ? 'checkmark-circle' : 'alert-circle'}"></ion-icon>
                    <span>${c.text}</span>
                </div>
            `).join('');
        }

        function renderSkills(skills) {
            document.getElementById('skillsList').innerHTML = skills.map(s => `
                <span class="tag">${s}</span>
            `).join('');
        }

        // --- JOB SEARCH LOGIC ---
        function generateLinks() {
            const role = document.getElementById('jobRole').value;
            const location = document.getElementById('jobLocation').value;
            const skills = document.getElementById('jobSkills').value.split(',').map(s => s.trim()).filter(s => s);

            if (!role) { alert("Please enter a job role"); return; }

            const skillQuery = skills.length > 0 ? `(${skills.map(s => `"${s}"`).join(" OR ")})` : "";
            const fullQuery = encodeURIComponent(`"${role}" ${skillQuery}`);
            const locQuery = encodeURIComponent(location);

            const links = [
                {
                    name: "LinkedIn",
                    icon: "logo-linkedin",
                    url: `https://www.linkedin.com/jobs/search/?keywords=${fullQuery}&location=${locQuery}`
                },
                {
                    name: "Google Jobs",
                    icon: "logo-google",
                    url: `https://www.google.com/search?q=${role} ${skills.join(" ")} jobs in ${location}&ibp=htl;jobs`
                },
                {
                    name: "Indeed",
                    icon: "briefcase",
                    url: `https://www.indeed.com/jobs?q=${fullQuery}&l=${locQuery}`
                },
                {
                    name: "Naukri",
                    icon: "search",
                    url: `https://www.naukri.com/${role.replace(/ /g, '-')}-jobs-in-${location.toLowerCase().replace(/ /g, '-')}`
                }
            ];

            document.getElementById('linkResults').style.display = 'block';
            document.getElementById('searchGrid').innerHTML = links.map(link => `
                <a href="${link.url}" target="_blank" class="search-card">
                    <div class="search-icon"><ion-icon name="${link.icon}"></ion-icon></div>
                    <h3>${link.name}</h3>
                    <p>Click to Search</p>
                </a>
            `).join('');

            // Add Excel Tracker Download
            addTrackerDownload(role, links);
        }

        function addTrackerDownload(role, links) {
            const existingBtn = document.getElementById('trackerBtn');
            if (existingBtn) existingBtn.remove();

            const csvContent = "data:text/csv;charset=utf-8,"
                + "Platform,Search Link,Status,Date Applied,Notes\n"
                + links.map(l => `${l.name},${l.url},To Apply,,`).join("\n");

            const encodedUri = encodeURI(csvContent);
            const linkBox = document.getElementById('linkResults');

            const downBtn = document.createElement('a');
            downBtn.id = 'trackerBtn';
            downBtn.className = 'btn';
            downBtn.style.marginTop = '2rem';
            downBtn.style.backgroundColor = '#10b981'; // Green for excel/sheets
            downBtn.setAttribute("href", encodedUri);
            downBtn.setAttribute("download", `Job_Search_Tracker_${role}.csv`);
            downBtn.innerHTML = '<ion-icon name="grid-outline"></ion-icon> Download Search Tracking Sheet (Excel)';

            linkBox.appendChild(downBtn);
        }
    </script>
</body>

</html>